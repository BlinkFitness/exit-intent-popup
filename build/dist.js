!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self)["exit-intent-popup"]=t()}(this,(function(){"use strict";const e={create(e,t,o,n){var i="";if(n)i="; expires=0";else if(o){var s=new Date;s.setTime(s.getTime()+24*o*60*60*1e3),i="; expires="+s.toGMTString()}document.cookie=e+"="+t+i+"; path=/"},get(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var i=o[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},erase(e){this.create(e,"",-1)}};return{shown:!1,delay:5,showOnDelay:!1,cookieExp:30,showOncePerSession:!1,onPopup:null,cookieNamespace:"bioep_",checkCookie(){return this.cookieExp<=0?!(!this.showOncePerSession||"true"!=e.get(this.cookieNamespace+"shown_session"))||(e.erase(this.cookieNamespace+"shown"),!1):"true"==e.get(this.cookieNamespace+"shown")},showPopup(){this.shown||(this.shown=!0,e.create(this.cookieNamespace+"shown","true",this.cookieExp,!1),e.create(this.cookieNamespace+"shown_session","true",0,!0),"function"==typeof this.onPopup&&this.onPopup())},addEvent:function(e,t,o){e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent&&e.attachEvent("on"+t,o)},removeEvent:function(e,t,o){e.removeEventListener?e.removeEventListener(t,o,!1):e.detachEvent&&e.detachEvent("on"+t,o)},loadEvents:function(){this.addEvent(document,"mouseout",this.onMouseOverHandler)},onClose:function(){this.removeEvent(document,"mouseout",this.onMouseOverHandler),this.removeEvent(document,"DOMContentLoaded",this.onInitHandler)},setOptions:function(e){this.delay=void 0===e.delay?this.delay:e.delay,this.showOnDelay=void 0===e.showOnDelay?this.showOnDelay:e.showOnDelay,this.cookieExp=void 0===e.cookieExp?this.cookieExp:e.cookieExp,this.showOncePerSession=void 0===e.showOncePerSession?this.showOncePerSession:e.showOncePerSession,this.onPopup=void 0===e.onPopup?this.onPopup:e.onPopup,this.cookieNamespace=void 0===e.cookieNamespace?this.cookieNamespace:e.cookieNamespace},onMouseOverHandler:function(e){if("input"!=(e=e||window.event).target.tagName.toLowerCase()){var t=Math.max(document.documentElement.clientWidth,window.innerWidth||0);if(!(e.clientX>=t-50))if(!(e.clientY>=50))e.relatedTarget||e.toElement||this.showPopup()}},onInitHandler:function(){this.checkCookie()||setTimeout(function(){this.loadEvents(),this.showOnDelay&&this.showPopup()}.bind(this),1e3*this.delay)},init:function(e){void 0!==e&&this.setOptions(e),this.onClose=this.onClose.bind(this),this.onMouseOverHandler=this.onMouseOverHandler.bind(this),this.onInitHandler=this.onInitHandler.bind(this),"interactive"===document.readyState||"complete"===document.readyState?this.onInitHandler():this.addEvent(document,"DOMContentLoaded",this.onInitHandler)}}}));
